<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T·∫£i Video ƒêa N·ªÅn T·∫£ng - Auto Ch·∫•t L∆∞·ª£ng Cao</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            padding: 30px 0;
        }
        
        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 10px;
        }
        
        .logo i {
            font-size: 2.8rem;
            color: #00ff88;
        }
        
        h1 {
            font-size: 2.8rem;
            background: linear-gradient(90deg, #00ff88, #00ccff);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 10px;
        }
        
        .tagline {
            font-size: 1.2rem;
            color: #b8b8d1;
            margin-bottom: 30px;
        }
        
        .input-section {
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(0, 255, 136, 0.1);
            margin-bottom: 40px;
        }
        
        .platform-icons {
            display: flex;
            justify-content: center;
            gap: 25px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .platform-icon {
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: transform 0.3s;
        }
        
        .platform-icon:hover {
            transform: translateY(-5px);
        }
        
        .platform-icon i {
            font-size: 2.5rem;
            margin-bottom: 8px;
        }
        
        .tiktok-icon {
            color: #ff0050;
        }
        
        .youtube-icon {
            color: #ff0000;
        }
        
        .facebook-icon {
            color: #1877f2;
        }
        
        .instagram-icon {
            color: #e4405f;
        }
        
        .twitter-icon {
            color: #1da1f2;
        }
        
        .platform-name {
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .url-input-container {
            margin-bottom: 25px;
        }
        
        .url-label {
            display: block;
            margin-bottom: 10px;
            font-size: 1.1rem;
            color: #b8b8d1;
        }
        
        .url-input-wrapper {
            display: flex;
            gap: 10px;
        }
        
        #videoUrl {
            flex: 1;
            padding: 15px 20px;
            border-radius: 12px;
            border: 2px solid rgba(0, 255, 136, 0.3);
            background-color: rgba(0, 0, 0, 0.3);
            color: white;
            font-size: 1rem;
            transition: all 0.3s;
        }
        
        #videoUrl:focus {
            outline: none;
            border-color: #00ff88;
            box-shadow: 0 0 15px rgba(0, 255, 136, 0.3);
        }
        
        #downloadBtn {
            padding: 15px 30px;
            background: linear-gradient(90deg, #00ff88, #00ccff);
            color: #000;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        #downloadBtn:hover {
            background: linear-gradient(90deg, #00ccff, #00ff88);
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0, 255, 136, 0.4);
        }
        
        #downloadBtn:disabled {
            background: #555;
            color: #999;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .result-section {
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 30px;
            margin-top: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(0, 255, 136, 0.1);
            display: none;
            margin-bottom: 40px;
        }
        
        .result-section.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .result-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .result-header h2 {
            color: #00ff88;
        }
        
        #closeResult {
            background: none;
            border: none;
            color: #b8b8d1;
            font-size: 1.5rem;
            cursor: pointer;
            transition: color 0.3s;
        }
        
        #closeResult:hover {
            color: #ff0050;
        }
        
        .video-info {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .thumbnail {
            width: 200px;
            height: 120px;
            border-radius: 10px;
            overflow: hidden;
            background-color: rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .video-details {
            flex: 1;
            min-width: 300px;
        }
        
        .video-details h3 {
            margin-bottom: 10px;
            color: #fff;
        }
        
        .video-details p {
            color: #b8b8d1;
            margin-bottom: 8px;
        }
        
        .auto-quality-info {
            background: rgba(0, 255, 136, 0.1);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 25px;
            border-left: 4px solid #00ff88;
        }
        
        .auto-quality-info h4 {
            color: #00ff88;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .auto-quality-info p {
            color: #b8b8d1;
            font-size: 0.95rem;
        }
        
        .download-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }
        
        @media (max-width: 600px) {
            .download-buttons {
                grid-template-columns: 1fr;
            }
        }
        
        .download-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 25px 20px;
            background: linear-gradient(135deg, rgba(0, 255, 136, 0.1) 0%, rgba(0, 204, 255, 0.1) 100%);
            border-radius: 15px;
            text-decoration: none;
            color: white;
            transition: all 0.3s;
            border: 1px solid rgba(0, 255, 136, 0.2);
            text-align: center;
        }
        
        .download-btn:hover {
            background: linear-gradient(135deg, rgba(0, 255, 136, 0.2) 0%, rgba(0, 204, 255, 0.2) 100%);
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }
        
        .download-btn i {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }
        
        .download-btn.video i {
            color: #00ff88;
        }
        
        .download-btn.audio i {
            color: #00ccff;
        }
        
        .download-btn .btn-title {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .download-btn .btn-desc {
            font-size: 0.9rem;
            color: #b8b8d1;
        }
        
        .loading {
            display: none;
            text-align: center;
            margin: 20px 0;
        }
        
        .loading.active {
            display: block;
        }
        
        .spinner {
            border: 5px solid rgba(255, 255, 255, 0.1);
            border-top: 5px solid #00ff88;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .loading-details {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            margin-top: 20px;
        }
        
        .loading-step {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #b8b8d1;
        }
        
        .loading-step i {
            color: #00ff88;
        }
        
        .loading-step.active {
            color: #00ff88;
        }
        
        /* Info Section Styles - ƒê·∫∑t xu·ªëng d∆∞·ªõi */
        .info-section {
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(0, 255, 136, 0.1);
            margin-bottom: 40px;
        }
        
        .info-section h2 {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: #00ff88;
        }
        
        .features-list {
            list-style-type: none;
            margin-bottom: 30px;
        }
        
        .features-list li {
            padding: 12px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 1.1rem;
        }
        
        .features-list li:last-child {
            border-bottom: none;
        }
        
        .features-list i {
            color: #00ff88;
            font-size: 1.2rem;
            min-width: 24px;
        }
        
        .how-to-use {
            margin-top: 30px;
            padding-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .how-to-use h3 {
            font-size: 1.4rem;
            margin-bottom: 15px;
            color: #00ff88;
        }
        
        .steps {
            padding-left: 20px;
        }
        
        .steps li {
            margin-bottom: 10px;
            line-height: 1.5;
            font-size: 1.1rem;
        }
        
        footer {
            text-align: center;
            padding: 30px 0;
            color: #b8b8d1;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: 30px;
        }
        
        .disclaimer {
            font-size: 0.9rem;
            max-width: 800px;
            margin: 0 auto 20px;
            line-height: 1.5;
        }
        
        .copyright {
            font-size: 0.9rem;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 10px;
            background: linear-gradient(90deg, #00ff88, #00ccff);
            color: #000;
            font-weight: 700;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            display: none;
            max-width: 400px;
        }
        
        .notification.show {
            display: block;
            animation: slideIn 0.3s ease;
        }
        
        .notification.error {
            background: linear-gradient(90deg, #ff416c, #ff4b2b);
            color: white;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .auto-detect-info {
            margin-top: 15px;
            padding: 10px;
            background: rgba(0, 204, 255, 0.1);
            border-radius: 8px;
            font-size: 0.9rem;
            color: #b8b8d1;
            text-align: center;
        }
        
        /* Grid layout for larger screens */
        @media (min-width: 992px) {
            .content-wrapper {
                display: grid;
                grid-template-columns: 2fr 1fr;
                gap: 40px;
                align-items: start;
            }
            
            .input-section, .result-section {
                grid-column: 1;
            }
            
            .info-section {
                grid-column: 2;
                grid-row: span 2;
                position: sticky;
                top: 30px;
            }
        }
        
        .section-divider {
            height: 1px;
            background: linear-gradient(90deg, transparent, #00ff88, transparent);
            margin: 40px 0;
        }
    </style>
</head>
<body>
    <div class="notification" id="notification"></div>
    
    <div class="container">
        <header>
            <div class="logo">
                <i class="fas fa-robot"></i>
                <h1>Video Downloader PRO</h1>
            </div>
            <p class="tagline">T·ª± ƒë·ªông ch·ªçn ch·∫•t l∆∞·ª£ng cao nh·∫•t - Kh√¥ng c·∫ßn ch·ªçn c√†i ƒë·∫∑t</p>
        </header>
        
        <div class="content-wrapper">
            <div class="main-content">
                <div class="input-section">
                    <div class="platform-icons">
                        <div class="platform-icon">
                            <i class="fab fa-tiktok tiktok-icon"></i>
                            <span class="platform-name">TikTok</span>
                        </div>
                        <div class="platform-icon">
                            <i class="fab fa-youtube youtube-icon"></i>
                            <span class="platform-name">YouTube</span>
                        </div>
                        <div class="platform-icon">
                            <i class="fab fa-facebook facebook-icon"></i>
                            <span class="platform-name">Facebook</span>
                        </div>
                        <div class="platform-icon">
                            <i class="fab fa-instagram instagram-icon"></i>
                            <span class="platform-name">Instagram</span>
                        </div>
                        <div class="platform-icon">
                            <i class="fab fa-twitter twitter-icon"></i>
                            <span class="platform-name">Twitter</span>
                        </div>
                    </div>
                    
                    <div class="url-input-container">
                        <label for="videoUrl" class="url-label">D√°n li√™n k·∫øt video t·∫°i ƒë√¢y:</label>
                        <div class="url-input-wrapper">
                            <input type="text" id="videoUrl" placeholder="https://www.tiktok.com/@username/video/123456789..." autocomplete="off">
                            <button id="downloadBtn">T·∫£i Video</button>
                        </div>
                    </div>
                    
                    <div class="auto-detect-info">
                        <i class="fas fa-magic"></i> ·ª®ng d·ª•ng t·ª± ƒë·ªông ch·ªçn API ph√π h·ª£p v√† ch·∫•t l∆∞·ª£ng cao nh·∫•t
                    </div>
                    
                    <div class="loading" id="loadingIndicator">
                        <div class="spinner"></div>
                        <p>ƒêang ph√¢n t√≠ch video v√† t√¨m ch·∫•t l∆∞·ª£ng t·ªët nh·∫•t...</p>
                        
                        <div class="loading-details">
                            <div class="loading-step" id="step1">
                                <i class="fas fa-search"></i> ƒêang x√°c ƒë·ªãnh n·ªÅn t·∫£ng...
                            </div>
                            <div class="loading-step" id="step2">
                                <i class="fas fa-cogs"></i> ƒêang ch·ªçn API t·ªët nh·∫•t...
                            </div>
                            <div class="loading-step" id="step3">
                                <i class="fas fa-chart-line"></i> ƒêang t√¨m ch·∫•t l∆∞·ª£ng cao nh·∫•t...
                            </div>
                            <div class="loading-step" id="step4">
                                <i class="fas fa-download"></i> ƒêang chu·∫©n b·ªã t·∫£i xu·ªëng...
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="result-section" id="resultSection">
                    <div class="result-header">
                        <h2>Video ƒë√£ s·∫µn s√†ng t·∫£i</h2>
                        <button id="closeResult"><i class="fas fa-times"></i></button>
                    </div>
                    
                    <div class="video-info">
                        <div class="thumbnail">
                            <img id="videoThumbnail" src="" alt="Video thumbnail">
                        </div>
                        <div class="video-details">
                            <h3 id="videoTitle">Video Title Here</h3>
                            <p id="videoPlatform">N·ªÅn t·∫£ng: TikTok</p>
                            <p id="videoDuration">Th·ªùi l∆∞·ª£ng: 2:30</p>
                            <p id="videoAuthor">T√°c gi·∫£: @username</p>
                            <p id="videoQuality">Ch·∫•t l∆∞·ª£ng: ƒêang x√°c ƒë·ªãnh...</p>
                        </div>
                    </div>
                    
                    <div class="auto-quality-info">
                        <h4><i class="fas fa-check-circle"></i> ƒê√£ t·ª± ƒë·ªông ch·ªçn ch·∫•t l∆∞·ª£ng t·ªët nh·∫•t</h4>
                        <p id="qualityInfo">H·ªá th·ªëng ƒë√£ t·ª± ƒë·ªông ch·ªçn ch·∫•t l∆∞·ª£ng cao nh·∫•t c√≥ s·∫µn cho video n√†y.</p>
                    </div>
                    
                    <div class="download-buttons" id="downloadButtons">
                        <!-- N√∫t t·∫£i s·∫Ω ƒë∆∞·ª£c th√™m t·ª± ƒë·ªông -->
                    </div>
                </div>
            </div>
            
            <div class="info-section">
                <h2>T√≠nh nƒÉng th√¥ng minh</h2>
                <ul class="features-list">
                    <li><i class="fas fa-fire"></i> AI t·ª± ƒë·ªông ch·ªçn ch·∫•t l∆∞·ª£ng cao nh·∫•t cho video v√† MP3</li>
                    <li><i class="fas fa-video"></i> T·ª± ƒë·ªông ch·ªçn API ph√π h·ª£p v·ªõi t·ª´ng li√™n k·∫øt</li>
                    <li><i class="fas fa-tv"></i> Video: T·ª± ƒë·ªông ch·ªçn ƒë·ªô ph√¢n gi·∫£i cao nh·∫•t (4K, 1080p, 720p)</li>
                    <li><i class="fas fa-music"></i> MP3: T·ª± ƒë·ªông ch·ªçn bitrate cao nh·∫•t (320kbps, 256kbps)</li>
                    <li><i class="fas fa-cloud-download-alt"></i> T·∫£i tr·ª±c ti·∫øp v·ªÅ thi·∫øt b·ªã c·ªßa b·∫°n</li>
                    <li><i class="fas fa-comment"></i> Ho√†n to√†n mi·ªÖn ph√≠, kh√¥ng gi·ªõi h·∫°n</li>
                </ul>
                
                <div class="how-to-use">
                    <h3>C√°ch s·ª≠ d·ª•ng ƒë∆°n gi·∫£n</h3>
                    <ol class="steps">
                        <li>Sao ch√©p li√™n k·∫øt video t·ª´ TikTok, YouTube, Facebook...</li>
                        <li>D√°n v√†o √¥ tr√™n v√† nh·∫•n "T·∫£i Video"</li>
                        <li>H·ªá th·ªëng t·ª± ƒë·ªông ch·ªçn ch·∫•t l∆∞·ª£ng cao nh·∫•t</li>
                        <li>T·∫£i video ho·∫∑c MP3 v·ªÅ m√°y ngay l·∫≠p t·ª©c</li>
                    </ol>
                </div>
            </div>
        </div>
        
        <footer>
            <p class="disclaimer">
                <strong>L∆∞u √Ω:</strong> ·ª®ng d·ª•ng n√†y ch·ªâ d√†nh cho m·ª•c ƒë√≠ch c√° nh√¢n. H√£y t√¥n tr·ªçng b·∫£n quy·ªÅn v√† ch·ªâ t·∫£i video m√† b·∫°n c√≥ quy·ªÅn s·ª≠ d·ª•ng.
            </p>
            <p class="copyright">¬© 2023 Video Downloader PRO - T·ª± ƒë·ªông ch·ªçn ch·∫•t l∆∞·ª£ng cao nh·∫•t</p>
        </footer>
    </div>

    <script>
        // C√°c API th√¥ng minh - ·ª®ng d·ª•ng t·ª± ƒë·ªông ch·ªçn API ph√π h·ª£p
        const smartAPIs = {
            // API cho TikTok (∆∞u ti√™n ch·∫•t l∆∞·ª£ng cao)
            tiktok: [
                {
                    name: "TikTok HD API",
                    endpoint: "https://tikwm.com/api/",
                    quality: "HD",
                    method: "GET",
                    params: (url) => `?url=${encodeURIComponent(url)}&hd=1`
                },
                {
                    name: "TikTok No Watermark",
                    endpoint: "https://www.tikwm.com/api/",
                    quality: "HD",
                    method: "GET",
                    params: (url) => `?url=${encodeURIComponent(url)}`
                }
            ],
            
            // API cho YouTube (∆∞u ti√™n ch·∫•t l∆∞·ª£ng cao)
            youtube: [
                {
                    name: "YouTube 4K/HD API",
                    endpoint: "https://ytdl.iamidiotareyoutoo.workers.dev",
                    quality: "best",
                    method: "GET",
                    params: (url) => `/?url=${encodeURIComponent(url)}`
                },
                {
                    name: "YouTube Multi-Quality",
                    endpoint: "https://co.wuk.sh/api/json",
                    quality: "best",
                    method: "POST",
                    params: (url) => JSON.stringify({
                        url: url,
                        isAudioOnly: false,
                        isNoTTWatermark: false,
                        quality: "max"
                    })
                }
            ],
            
            // API ƒëa n·ªÅn t·∫£ng (d·ª± ph√≤ng)
            universal: [
                {
                    name: "Universal Downloader",
                    endpoint: "https://api.download-lagu.net/api/convert",
                    quality: "best",
                    method: "POST",
                    params: (url) => JSON.stringify({ url: url })
                }
            ]
        };
        
        // Hi·ªÉn th·ªã th√¥ng b√°o
        function showNotification(message, type = "info") {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type} show`;
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 5000);
        }
        
        // C·∫≠p nh·∫≠t b∆∞·ªõc loading
        function updateLoadingStep(stepNumber, isActive = true) {
            const step = document.getElementById(`step${stepNumber}`);
            if (step) {
                if (isActive) {
                    step.classList.add('active');
                } else {
                    step.classList.remove('active');
                }
            }
        }
        
        // X√°c ƒë·ªãnh n·ªÅn t·∫£ng t·ª´ URL
        function detectPlatform(url) {
            if (!url) return null;
            
            const urlLower = url.toLowerCase();
            
            if (urlLower.includes("tiktok.com") || urlLower.includes("tiktok")) return "tiktok";
            if (urlLower.includes("youtube.com") || urlLower.includes("youtu.be") || urlLower.includes("youtube")) return "youtube";
            if (urlLower.includes("facebook.com") || urlLower.includes("fb.watch") || urlLower.includes("facebook")) return "facebook";
            if (urlLower.includes("instagram.com") || urlLower.includes("instagram")) return "instagram";
            if (urlLower.includes("twitter.com") || urlLower.includes("x.com") || urlLower.includes("twitter")) return "twitter";
            
            return "universal";
        }
        
        // Th·ª≠ c√°c API cho n·ªÅn t·∫£ng
        async function tryAPIs(platform, url) {
            const apis = smartAPIs[platform] || smartAPIs.universal;
            
            for (const api of apis) {
                try {
                    showNotification(`ƒêang th·ª≠: ${api.name}...`, "info");
                    updateLoadingStep(2);
                    
                    let response;
                    const apiUrl = api.endpoint + (api.method === "GET" ? api.params(url) : "");
                    
                    if (api.method === "GET") {
                        response = await fetch(apiUrl, {
                            headers: {
                                'Accept': 'application/json',
                            }
                        });
                    } else {
                        response = await fetch(api.endpoint, {
                            method: 'POST',
                            headers: {
                                'Accept': 'application/json',
                                'Content-Type': 'application/json'
                            },
                            body: api.params(url)
                        });
                    }
                    
                    if (!response.ok) {
                        throw new Error(`API error: ${response.status}`);
                    }
                    
                    const data = await response.json();
                    
                    if (data.code === 0 || data.url || data.formats || data.success) {
                        showNotification(`‚úÖ ƒê√£ ch·ªçn: ${api.name}`, "info");
                        return { api: api.name, data: data, type: platform };
                    } else {
                        throw new Error("Invalid API response");
                    }
                    
                } catch (error) {
                    console.warn(`${api.name} failed:`, error.message);
                    continue;
                }
            }
            
            return null;
        }
        
        // X·ª≠ l√Ω d·ªØ li·ªáu t·ª´ API ƒë·ªÉ l·∫•y ch·∫•t l∆∞·ª£ng cao nh·∫•t
        function extractBestQuality(apiResult, platform) {
            if (!apiResult || !apiResult.data) return null;
            
            const data = apiResult.data;
            let videoUrl = null;
            let audioUrl = null;
            let videoQuality = "Ch·∫•t l∆∞·ª£ng cao";
            let audioQuality = "Bitrate cao";
            let title = "Video";
            let thumbnail = "";
            let duration = "N/A";
            let author = "N/A";
            
            updateLoadingStep(3);
            
            // X·ª≠ l√Ω d·ª±a tr√™n n·ªÅn t·∫£ng
            switch (platform) {
                case "tiktok":
                    if (data.data) {
                        title = data.data.title || "Video TikTok";
                        thumbnail = data.data.cover || "";
                        duration = data.data.duration || "N/A";
                        author = data.data.author?.nickname || "@tiktok_user";
                        
                        // ∆Øu ti√™n video kh√¥ng watermark HD
                        videoUrl = data.data.hdplay || data.data.play || data.data.wmplay;
                        videoQuality = videoUrl === data.data.hdplay ? "HD (Kh√¥ng watermark)" : 
                                      videoUrl === data.data.play ? "SD (Kh√¥ng watermark)" : "SD";
                        
                        // Audio t·ª´ video
                        audioUrl = data.data.music;
                        audioQuality = "MP3 320kbps";
                    }
                    break;
                    
                case "youtube":
                    if (data.formats) {
                        // L·∫•y th√¥ng tin video
                        title = data.videoDetails?.title || "YouTube Video";
                        thumbnail = data.videoDetails?.thumbnail?.thumbnails?.pop()?.url || "";
                        duration = data.videoDetails?.lengthSeconds ? 
                                 `${Math.floor(data.videoDetails.lengthSeconds / 60)}:${String(data.videoDetails.lengthSeconds % 60).padStart(2, '0')}` : "N/A";
                        author = data.videoDetails?.author || "YouTube Creator";
                        
                        // T√¨m ch·∫•t l∆∞·ª£ng video cao nh·∫•t (c√≥ c·∫£ video v√† audio)
                        const videoFormats = data.formats
                            .filter(f => f.hasVideo && f.hasAudio && f.url)
                            .sort((a, b) => {
                                // ∆Øu ti√™n ƒë·ªô ph√¢n gi·∫£i cao
                                const aHeight = a.height || 0;
                                const bHeight = b.height || 0;
                                return bHeight - aHeight;
                            });
                        
                        if (videoFormats.length > 0) {
                            videoUrl = videoFormats[0].url;
                            videoQuality = videoFormats[0].qualityLabel || `${videoFormats[0].height}p`;
                        }
                        
                        // T√¨m ch·∫•t l∆∞·ª£ng audio cao nh·∫•t
                        const audioFormats = data.formats
                            .filter(f => !f.hasVideo && f.hasAudio && f.url && f.audioBitrate)
                            .sort((a, b) => (b.audioBitrate || 0) - (a.audioBitrate || 0));
                        
                        if (audioFormats.length > 0) {
                            audioUrl = audioFormats[0].url;
                            audioQuality = `MP3 ${Math.round(audioFormats[0].audioBitrate / 1000)}kbps`;
                        }
                    } else if (data.url) {
                        // API th·ª© 2 cho YouTube
                        title = data.meta?.title || "YouTube Video";
                        thumbnail = data.meta?.thumbnail || "";
                        duration = data.meta?.duration?.toString() || "N/A";
                        author = data.meta?.channel || "YouTube Creator";
                        
                        videoUrl = data.url;
                        videoQuality = data.quality || "HD";
                        
                        // N·∫øu l√† audio only
                        if (data.isAudioOnly) {
                            audioUrl = data.url;
                            audioQuality = "MP3 ch·∫•t l∆∞·ª£ng cao";
                            videoUrl = null;
                        }
                    }
                    break;
                    
                default:
                    // API ƒëa n·ªÅn t·∫£ng
                    if (data.url) {
                        title = data.title || "Video";
                        thumbnail = data.thumbnail || "";
                        duration = data.duration || "N/A";
                        author = data.author || "N/A";
                        
                        if (data.type === "audio") {
                            audioUrl = data.url;
                            audioQuality = "MP3";
                        } else {
                            videoUrl = data.url;
                            videoQuality = data.quality || "Ch·∫•t l∆∞·ª£ng t·ªët nh·∫•t";
                        }
                    }
                    break;
            }
            
            return {
                success: true,
                platform: platform.charAt(0).toUpperCase() + platform.slice(1),
                title: title,
                thumbnail: thumbnail,
                duration: duration,
                author: author,
                videoUrl: videoUrl,
                videoQuality: videoQuality,
                audioUrl: audioUrl,
                audioQuality: audioQuality
            };
        }
        
        // T·∫°o n√∫t t·∫£i xu·ªëng
        function createDownloadButtons(videoInfo) {
            const buttonsContainer = document.getElementById('downloadButtons');
            buttonsContainer.innerHTML = '';
            
            if (videoInfo.videoUrl) {
                const videoFileName = `${videoInfo.title.replace(/[^\w\s]/gi, '').substring(0, 40)}_${videoInfo.videoQuality.replace(/\s+/g, '_')}.mp4`;
                
                const videoButton = document.createElement('a');
                videoButton.href = videoInfo.videoUrl;
                videoButton.download = videoFileName;
                videoButton.className = 'download-btn video';
                videoButton.innerHTML = `
                    <i class="fas fa-video"></i>
                    <div class="btn-title">T·∫¢I VIDEO</div>
                    <div class="btn-desc">${videoInfo.videoQuality}</div>
                    <div class="btn-desc">Ch·∫•t l∆∞·ª£ng cao nh·∫•t</div>
                `;
                videoButton.target = '_blank';
                
                buttonsContainer.appendChild(videoButton);
            }
            
            if (videoInfo.audioUrl) {
                const audioFileName = `${videoInfo.title.replace(/[^\w\s]/gi, '').substring(0, 40)}_${videoInfo.audioQuality.replace(/\s+/g, '_')}.mp3`;
                
                const audioButton = document.createElement('a');
                audioButton.href = videoInfo.audioUrl;
                audioButton.download = audioFileName;
                audioButton.className = 'download-btn audio';
                audioButton.innerHTML = `
                    <i class="fas fa-music"></i>
                    <div class="btn-title">T·∫¢I MP3</div>
                    <div class="btn-desc">${videoInfo.audioQuality}</div>
                    <div class="btn-desc">√Çm thanh ch·∫•t l∆∞·ª£ng cao</div>
                `;
                audioButton.target = '_blank';
                
                buttonsContainer.appendChild(audioButton);
            }
            
            // N·∫øu kh√¥ng c√≥ n√∫t n√†o, hi·ªÉn th·ªã th√¥ng b√°o
            if (!videoInfo.videoUrl && !videoInfo.audioUrl) {
                buttonsContainer.innerHTML = `
                    <div style="text-align: center; padding: 30px; color: #ff6b6b;">
                        <i class="fas fa-exclamation-triangle" style="font-size: 3rem; margin-bottom: 15px;"></i>
                        <h3>Kh√¥ng th·ªÉ t√¨m th·∫•y li√™n k·∫øt t·∫£i xu·ªëng</h3>
                        <p>Vui l√≤ng th·ª≠ l·∫°i v·ªõi video kh√°c ho·∫∑c ki·ªÉm tra li√™n k·∫øt.</p>
                    </div>
                `;
            }
        }
        
        // X·ª≠ l√Ω t·∫£i video
        async function processVideoDownload(url) {
            try {
                // Reset loading steps
                for (let i = 1; i <= 4; i++) {
                    updateLoadingStep(i, false);
                }
                
                // B∆∞·ªõc 1: X√°c ƒë·ªãnh n·ªÅn t·∫£ng
                updateLoadingStep(1, true);
                const platform = detectPlatform(url);
                
                if (!platform) {
                    throw new Error("Kh√¥ng nh·∫≠n di·ªán ƒë∆∞·ª£c n·ªÅn t·∫£ng. Vui l√≤ng ki·ªÉm tra l·∫°i li√™n k·∫øt.");
                }
                
                showNotification(`üì± ƒê√£ x√°c ƒë·ªãnh: ${platform.toUpperCase()}`, "info");
                
                // B∆∞·ªõc 2: Th·ª≠ c√°c API
                updateLoadingStep(2, true);
                const apiResult = await tryAPIs(platform, url);
                
                if (!apiResult) {
                    throw new Error("Kh√¥ng th·ªÉ k·∫øt n·ªëi ƒë·∫øn d·ªãch v·ª• t·∫£i video. Vui l√≤ng th·ª≠ l·∫°i sau.");
                }
                
                // B∆∞·ªõc 3: Tr√≠ch xu·∫•t ch·∫•t l∆∞·ª£ng cao nh·∫•t
                updateLoadingStep(3, true);
                const videoInfo = extractBestQuality(apiResult, platform);
                
                if (!videoInfo || !videoInfo.success) {
                    throw new Error("Kh√¥ng th·ªÉ x·ª≠ l√Ω video. Vui l√≤ng th·ª≠ v·ªõi video kh√°c.");
                }
                
                // B∆∞·ªõc 4: Chu·∫©n b·ªã t·∫£i xu·ªëng
                updateLoadingStep(4, true);
                
                return videoInfo;
                
            } catch (error) {
                console.error("Process error:", error);
                throw error;
            }
        }
        
        // X·ª≠ l√Ω s·ª± ki·ªán khi nh·∫•n n√∫t t·∫£i xu·ªëng
        document.getElementById('downloadBtn').addEventListener('click', async function() {
            const urlInput = document.getElementById('videoUrl');
            const url = urlInput.value.trim();
            
            if (!url) {
                showNotification("Vui l√≤ng d√°n li√™n k·∫øt video v√†o √¥ tr·ªëng!", "error");
                urlInput.focus();
                return;
            }
            
            // Hi·ªÉn th·ªã loading indicator
            const loadingIndicator = document.getElementById('loadingIndicator');
            loadingIndicator.classList.add('active');
            this.disabled = true;
            this.textContent = "ƒêang x·ª≠ l√Ω...";
            
            try {
                // X·ª≠ l√Ω video
                const videoInfo = await processVideoDownload(url);
                
                // Hi·ªÉn th·ªã th√¥ng tin video
                document.getElementById('videoTitle').textContent = videoInfo.title;
                document.getElementById('videoPlatform').textContent = `N·ªÅn t·∫£ng: ${videoInfo.platform}`;
                document.getElementById('videoDuration').textContent = `Th·ªùi l∆∞·ª£ng: ${videoInfo.duration}`;
                document.getElementById('videoAuthor').textContent = `T√°c gi·∫£: ${videoInfo.author}`;
                document.getElementById('videoQuality').textContent = `Ch·∫•t l∆∞·ª£ng: ${videoInfo.videoQuality}`;
                
                // C·∫≠p nh·∫≠t th√¥ng tin ch·∫•t l∆∞·ª£ng
                let qualityText = `H·ªá th·ªëng ƒë√£ t·ª± ƒë·ªông ch·ªçn ch·∫•t l∆∞·ª£ng t·ªët nh·∫•t: `;
                if (videoInfo.videoUrl) {
                    qualityText += `<strong>${videoInfo.videoQuality}</strong> cho video`;
                }
                if (videoInfo.audioUrl) {
                    if (videoInfo.videoUrl) qualityText += ` v√† `;
                    qualityText += `<strong>${videoInfo.audioQuality}</strong> cho MP3`;
                }
                document.getElementById('qualityInfo').innerHTML = qualityText;
                
                // ƒê·∫∑t thumbnail n·∫øu c√≥
                const thumbnailElement = document.getElementById('videoThumbnail');
                if (videoInfo.thumbnail) {
                    thumbnailElement.src = videoInfo.thumbnail;
                    thumbnailElement.style.display = "block";
                } else {
                    thumbnailElement.style.display = "none";
                }
                
                // T·∫°o n√∫t t·∫£i xu·ªëng
                createDownloadButtons(videoInfo);
                
                // Hi·ªÉn th·ªã k·∫øt qu·∫£
                document.getElementById('resultSection').classList.add('active');
                
                showNotification(`‚úÖ ƒê√£ s·∫µn s√†ng! Ch·ªçn t·∫£i video ho·∫∑c MP3 ch·∫•t l∆∞·ª£ng cao.`, "info");
                
            } catch (error) {
                console.error("L·ªói:", error);
                showNotification(`‚ùå ${error.message}`, "error");
                
            } finally {
                // ·∫®n loading indicator
                loadingIndicator.classList.remove('active');
                this.disabled = false;
                this.textContent = "T·∫£i Video";
                
                // Reset loading steps
                for (let i = 1; i <= 4; i++) {
                    updateLoadingStep(i, false);
                }
            }
        });
        
        // ƒê√≥ng ph·∫ßn k·∫øt qu·∫£
        document.getElementById('closeResult').addEventListener('click', function() {
            document.getElementById('resultSection').classList.remove('active');
        });
        
        // Th√™m v√≠ d·ª• URL khi click v√†o bi·ªÉu t∆∞·ª£ng n·ªÅn t·∫£ng
        document.querySelectorAll('.platform-icon').forEach(icon => {
            icon.addEventListener('click', function() {
                const platformName = this.querySelector('.platform-name').textContent.toLowerCase();
                
                // ƒê·∫∑t v√≠ d·ª• URL
                const examples = {
                    tiktok: "https://www.tiktok.com/@tiktok/video/7156033831819906346",
                    youtube: "https://www.youtube.com/watch?v=dQw4w9WgXcQ",
                    facebook: "https://www.facebook.com/facebook/videos/10153231379946729/",
                    instagram: "https://www.instagram.com/reel/Cr4peFbJoDz/",
                    twitter: "https://twitter.com/Twitter/status/20"
                };
                
                if (examples[platformName]) {
                    document.getElementById('videoUrl').value = examples[platformName];
                    showNotification(`ƒê√£ ch·ªçn v√≠ d·ª• ${platformName}. Nh·∫•n "T·∫£i Video" ƒë·ªÉ th·ª≠.`, "info");
                }
            });
        });
        
        // Th√™m placeholder ƒë·ªông cho √¥ nh·∫≠p li·ªáu
        const urlInput = document.getElementById('videoUrl');
        const placeholders = [
            "https://www.tiktok.com/@tiktok/video/7156033831819906346",
            "https://www.youtube.com/watch?v=dQw4w9WgXcQ",
            "https://www.facebook.com/facebook/videos/10153231379946729/",
            "https://www.instagram.com/reel/Cr4peFbJoDz/",
            "https://twitter.com/Twitter/status/20"
        ];
        
        let currentPlaceholderIndex = 0;
        
        function rotatePlaceholder() {
            urlInput.placeholder = placeholders[currentPlaceholderIndex];
            currentPlaceholderIndex = (currentPlaceholderIndex + 1) % placeholders.length;
        }
        
        // Xoay placeholder m·ªói 3 gi√¢y
        rotatePlaceholder();
        setInterval(rotatePlaceholder, 3000);
        
        // Hi·ªÉn th·ªã th√¥ng b√°o ch√†o m·ª´ng
        setTimeout(() => {
            showNotification("üöÄ Video Downloader PRO ƒë√£ s·∫µn s√†ng! D√°n li√™n k·∫øt v√† t·∫£i ngay.", "info");
        }, 1000);
    </script>
</body>
</html>
